<!--pages/today/index.wxml-->
<view class="mode" style="margin-top: {{tabbarRealHeight  + 'px'}}; height: calc(100vh - {{tabbarRealHeight +90 + 'px'}});">
  <view class="date">
    <view class="date-title">
      <view>今天</view>
      <view></view>
    </view>
    <view class="weekend">
      <view 
        wx:for="{{weekendData}}" wx:key="id" 
        class="{{item.id === weekendActiveIndex ? 'active' : ''}}" 
        bindtap="handleWeekendChange" data-id="{{item.id}}"
      >
        {{item.title}}
      </view>
    </view>
    <image class="add" src="/static/image/add.png" mode="aspectFit" lazy-load="false" binderror="" bindload="" />

  </view>
  <view class="kcal">
    <view class="top">
      <view class="left">
        <view>热量摄入</view>
        <view>1273</view>
      </view>
      <view class="circle-box">
        <view class="circle">
          <view 
            class="circle-background" 
            style="background: {{circleBackground}};">
          </view>
        </view>
        <view class="circleinfo">
          <view>还能吃</view>
          <view>1273</view>
          <view>建议 2238</view>
        </view>
      </view>
      <view class="right">
        <view>热量消耗</view>
        <view>1672</view>
      </view>
    </view>
    <view class="bottom">
      <view>
        <view>碳水化合物</view>
        <view class="line">
          <view style="width: 10%;"></view>
        </view>
        <view>31 / 313 克</view>
      </view>
      <view>
        <view>蛋白质</view>
        <view class="line">
          <view></view>
        </view>
        <view>0 / 90 克</view>
      </view>
      <view>
        <view>脂肪</view>
        <view class="line">
          <view></view>
        </view>
        <view>0 / 70 克</view>
      </view>
    </view>
  </view>

  <view class="eatingList">
    <view class="eatingTitle">
      <view>
        <view>早餐</view>
        <view>建议 600-800 千卡</view>
      </view>
      <view>1273 千卡</view>
    </view>
    <view class="eatingItem">
      <view>
        <view class="eatingImg" >
          <image src="/static/image/eating1.jpg" mode="aspectFit" lazy-load="false" binderror="" bindload="" />
        </view>
        <view class="eatingInfo">
          <view>达美乐鸡蛋沙拉</view>
          <view>250 克</view>
        </view>
      </view>
      <view>100 千卡 ></view>
    </view>
      
  </view>
    
</view>
<view class="drawer-mask" wx:if="{{showMaskDrawer}}" bindtap="closeMaskDrawer"></view>
<view class="drawer {{showMaskDrawer ? 'drawer-show' : ''}}">
  <view class="drawer-header">
    <view class="drawer-title">{{supplementStep === 1 ? '欢迎使用健康，现在开始完善信息' : '这些完成我们就开始'}}</view>
    <view class="drawer-close" bindtap="closeMaskDrawer">×</view>
  </view>
  <view class="drawer-content" wx:if="{{supplementStep === 1}}">
    <view class="form-group">
      <view class="account-title">身高<text class="required">*</text></view>
      <view class="account-input">
        <input type="digit" value="{{formData.height}}" bindinput="handleHeightInput" placeholder-class="placeholderClass" placeholder="请输入身高(cm)" />  
      </view>
      <view class="account-title">出生年月<text class="required">*</text></view>
      <view class="account-input">
        <view class="account-input">
          <picker mode="date" value="{{formData.birthday}}" bindchange="handleBirthdayChange">
            <view class="{{formData.birthday ? '' : 'placeholderClass'}}">
              {{formData.birthday || '请选择日期'}}
            </view>
          </picker>
        </view>
      </view>
    </view>
    <view class="btn-group">
      <view class="wx-login-btn" bindtap="nextStep">下一步</view>
      <view class="otherlogin" bindtap="closeMaskDrawer">取消</view>
    </view>
  </view>
  <view class="drawer-content" wx:if="{{supplementStep === 2}}">
    <view class="form-group">
      <view class="account-title">体重<text class="required">*</text></view>
      <view class="account-input">
        <input type="digit" value="{{formData.weight}}" bindinput="handleWeightInput" placeholder-class="placeholderClass" placeholder="请输入当前体重(kg)" />
      </view>

      <view class="account-title">目标体重<text class="required">*</text></view>
      <view class="account-input">
        <input type="digit" value="{{formData.target_weight}}" bindinput="handleTargetWeightInput" placeholder-class="placeholderClass" placeholder="请输入目标体重(kg)" />
      </view>

      <view class="account-title">目标类型<text class="required">*</text></view>
      <view class="account-input">
        <picker mode="selector" range="{{targetTypes}}" range-key="title" value="{{formData.target_type}}" bindchange="handleTargetTypeChange">
          <view class="{{formData.target_type ? '' : 'placeholderClass'}}">
            {{formData.target_typeTitle || '请选择目标类型'}}
          </view>
        </picker>
      </view>

      <view class="account-title">BMI指数</view>
      <view class="account-input">
        <text>{{formData.bmi || '待计算'}}</text>
      </view>

      <view class="account-title">基础代谢率</view>
      <view class="account-input">
        <text>{{formData.bmr || '待计算'}}</text>
      </view>
    </view>

    <view class="btn-group">
      <view class="wx-login-btn" bindtap="submitForm">保存</view>
      <view class="otherlogin" bindtap="closeMaskDrawer">取消</view>
    </view>
  </view>
</view>

