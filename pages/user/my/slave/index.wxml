<!--pages/explore/tools/dict/index.wxml-->
<header classTitle="center" classColor="true" isBack="true" backgroundColor="#f4f4f5">身份</header>
<view class="mode" style="padding-top: {{tabbarRealHeight + 'px'}}; height: 100vh; overflow-y: auto;">
  <view class="slaveInfo">
    <view class="slaveInfo-title">
      <view>编号：{{formData.number}}</view>
      <view>通行证</view>
    </view>
    <view class="slaveInfo-content">
      <view class="content-top">
        <view class="content-top-left">
          <image src="https://crayonapi.orcatt.one/static/avatar/avatar_1741226563317.jpg" mode="aspectFill"></image>
        </view>
        <view class="content-top-right">
          <view class="content-top-right-line1">
            <view>{{formData.name}}</view>
            <view>{{formData.sexual_orientation ? formData.sexual_orientation : ''}}</view>
            <view>{{formData.role_recognition ? formData.role_recognition : ''}}</view>
          </view>
          <view class="content-top-right-line2" style="margin-top: 20rpx;">
            <view>年龄<text>{{formData.age ? formData.age : ''}}</text></view>
            <view>鞋码<text>{{formData.shoe_size ? formData.shoe_size : '0'}}</text></view>
          </view>
          <view class="content-top-right-line2">
            <view>身高<text>{{formData.height ? formData.height : '0'}}</text></view>
            <view>体重<text>{{formData.weight ? formData.weight : '0'}}</text></view>
          </view>
        </view>
      </view>
      <view class="content-bottom">
        <view class="content-bottom-line">
          <view>
            <view>圈龄</view>
            <view><text>{{formData.experience_years ? formData.experience_years : '0'}}</text>年</view>
          </view>
          <view>
            <view>侍主</view>
            <view><text>{{formData.submissive_count ? formData.submissive_count : '0'}}</text>人</view>
          </view>
          <view>
            <view>是否割包皮</view>
            <view><text>{{formData.dick_circumcised == 1 ? '是' : '否'}}</text></view>
          </view>
        </view>
        <view class="content-bottom-line">
          <view>
            <view>未充血尺寸</view>
            <view><text>{{formData.dick_unerected_size ? formData.dick_unerected_size : '0'}}</text>cm</view>
          </view>
          <view>
            <view>充血尺寸</view>
            <view><text>{{formData.dick_erected_size ? formData.dick_erected_size : '0'}}</text>cm</view>
          </view>
          <view>
            <view>粗度</view>
            <view><text>{{formData.dick_coarse ? formData.dick_coarse : '0'}}</text>cm</view>
          </view>
        </view>
        <view class="content-bottom-line">
          <view>
            <view>最长禁欲时间</view>
            <view><text>{{formData.longest_abstinence ? formData.longest_abstinence : '0'}}</text>天</view>
          </view>
          <view>
            <view>精液量</view>
            <view><text>{{formData.semen_volume ? formData.semen_volume : '0'}}</text>ml</view>
          </view>
          <view>
            <view>肛门扩张直径</view>
            <view><text>{{formData.anal_diameter ? formData.anal_diameter : '0'}}</text>cm</view>
          </view>
        </view>
        <view class="content-bottom-line">
          <view>
            <view>最大射精频率</view>
            <view><text>{{formData.max_ejaculation_frequency ? formData.max_ejaculation_frequency : '0'}}</text>次/天</view>
          </view>
          <view>
            <view>平均自慰频率</view>
            <view><text>{{formData.avg_masturbation_frequency ? formData.avg_masturbation_frequency : '0'}}</text>次/周</view>
          </view>
          <view>
            <view>平均自慰时间</view>
            <view><text>{{formData.avg_masturbation_duration ? formData.avg_masturbation_duration : '0'}}</text>分钟</view>
          </view>
        </view>
      </view>
    </view>
  </view>
    
  <view class="start-btn" bindtap="showDrawer">开始认证</view>
</view>

<!-- 完善信息弹窗 -->
<view class="drawer-mask" wx:if="{{showSupplementDrawer}}" bindtap="closeSupplementDrawer"></view>
<view class="drawer {{showSupplementDrawer ? 'drawer-show' : ''}}">
  <view class="drawer-header">
    <view class="drawer-title">{{supplementStep === 1 ? '基本信息' : supplementStep === 2 ? '身体信息' : '习惯信息'}}</view>
    <view class="drawer-close" bindtap="closeSupplementDrawer">×</view>
  </view>

  <!-- 步骤1 -->
  <view class="drawer-content" wx:if="{{supplementStep === 1}}">
    <view class="form-group">
      <view class="form-row">
        <view class="form-item">
          <view class="account-title">姓名<text class="required">*</text></view>
          <view class="account-input">
            <input type="text" value="{{formData.name}}" data-field="name" bindinput="handleInput" placeholder="请输入姓名" />
          </view>
        </view>
        <view class="form-item">
          <view class="account-title">出生年月</view>
          <view class="account-input">
            <picker mode="date" value="{{formData.birthday}}" bindchange="handleBirthdayChange">
              <view class="{{formData.birthday ? '' : 'placeholderClass'}}">
                {{formData.birthday || '请选择日期'}}
              </view>
            </picker>
          </view>
        </view>
      </view>

      <view class="form-row">
        <view class="form-item">
          <view class="account-title">身高(cm)</view>
          <view class="account-input">
            <input type="digit" value="{{formData.height}}" data-field="height" bindinput="handleInput" placeholder="请输入身高" />
          </view>
        </view>
        <view class="form-item">
          <view class="account-title">体重(kg)</view>
          <view class="account-input">
            <input type="digit" value="{{formData.weight}}" data-field="weight" bindinput="handleInput" placeholder="请输入体重" />
          </view>
        </view>
        <view class="form-item">
          <view class="account-title">鞋码</view>
          <view class="account-input">
            <input type="digit" value="{{formData.shoe_size}}" data-field="shoe_size" bindinput="handleInput" placeholder="请输入鞋码" />
          </view>
        </view>
      </view>

      <view class="form-row">
        <view class="form-item">
          <view class="account-title">性取向</view>
          <view class="account-input">
            <picker mode="selector" range="{{orientationTypes}}" bindchange="handleOrientationChange">
              <view class="{{formData.sexual_orientation ? '' : 'placeholderClass'}}">
                {{formData.sexual_orientation || '请选择性取向'}}
              </view>
            </picker>
          </view>
        </view>
        <view class="form-item">
          <view class="account-title">角色认知</view>
          <view class="account-input">
            <picker mode="selector" range="{{roleTypes}}" bindchange="handleRoleChange">
              <view class="{{formData.role_recognition ? '' : 'placeholderClass'}}">
                {{formData.role_recognition || '请选择角色'}}
              </view>
            </picker>
          </view>
        </view>
      </view>

      <view class="form-row">
        <view class="form-item">
          <view class="account-title">圈龄(年)</view>
          <view class="account-input">
            <input type="number" value="{{formData.experience_years}}" data-field="experience_years" bindinput="handleInput" placeholder="请输入圈龄" />
          </view>
        </view>
        <view class="form-item">
          <view class="account-title">侍主人数</view>
          <view class="account-input">
            <input type="number" value="{{formData.submissive_count}}" data-field="submissive_count" bindinput="handleInput" placeholder="请输入数量" />
          </view>
        </view>
      </view>
    </view>

    <view class="btn-group">
      <view class="wx-login-btn" bindtap="nextStep">下一步</view>
      <view class="otherlogin" bindtap="closeSupplementDrawer">取消</view>
    </view>
  </view>

  <!-- 步骤2 -->
  <view class="drawer-content" wx:if="{{supplementStep === 2}}">
    <view class="form-group">
      <view class="form-row">
        <view class="form-item">
          <view class="account-title">未充血尺寸(cm)</view>
          <view class="account-input">
            <input type="digit" value="{{formData.dick_unerected_size}}" data-field="dick_unerected_size" bindinput="handleInput" placeholder="请输入尺寸" />
          </view>
        </view>
        <view class="form-item">
          <view class="account-title">充血尺寸(cm)</view>
          <view class="account-input">
            <input type="digit" value="{{formData.dick_erected_size}}" data-field="dick_erected_size" bindinput="handleInput" placeholder="请输入尺寸" />
          </view>
        </view>
      </view>

      <view class="form-row">
        <view class="form-item">
          <view class="account-title">粗度(cm)</view>
          <view class="account-input">
            <input type="digit" value="{{formData.dick_coarse}}" data-field="dick_coarse" bindinput="handleInput" placeholder="请输入粗度" />
          </view>
        </view>
        <view class="form-item">
          <view class="account-title">是否割包皮</view>
          <view class="account-input switch-container">
            <switch checked="{{formData.dick_circumcised}}" bindchange="handleCircumcisedChange" color="#18181b" />
          </view>
        </view>
      </view>

      <view class="form-row">
        <view class="form-item">
          <view class="account-title">肛门扩张直径(cm)</view>
          <view class="account-input">
            <input type="digit" value="{{formData.anal_diameter}}" data-field="anal_diameter" bindinput="handleInput" placeholder="请输入直径" />
          </view>
        </view>
      </view>
    </view>

    <view class="btn-group">
      <view class="wx-login-btn" bindtap="nextStep">下一步</view>
      <view class="prev-btn" bindtap="prevStep">上一步</view>
      <view class="otherlogin" bindtap="closeSupplementDrawer">取消</view>
    </view>
  </view>

  <!-- 步骤3 -->
  <view class="drawer-content" wx:if="{{supplementStep === 3}}">
    <view class="form-group">
      <view class="form-row">
        <view class="form-item">
          <view class="account-title">最长禁欲时间(天)</view>
          <view class="account-input">
            <input type="number" value="{{formData.longest_abstinence}}" data-field="longest_abstinence" bindinput="handleInput" placeholder="请输入天数" />
          </view>
        </view>
        <view class="form-item">
          <view class="account-title">最大射精频率(次/天)</view>
          <view class="account-input">
            <input type="number" value="{{formData.max_ejaculation_frequency}}" data-field="max_ejaculation_frequency" bindinput="handleInput" placeholder="请输入频率" />
          </view>
        </view>
      </view>

      <view class="form-row">
        <view class="form-item">
          <view class="account-title">平均自慰频率(次/周)</view>
          <view class="account-input">
            <input type="number" value="{{formData.avg_masturbation_frequency}}" data-field="avg_masturbation_frequency" bindinput="handleInput" placeholder="请输入频率" />
          </view>
        </view>
        <view class="form-item">
          <view class="account-title">平均自慰时间(分钟)</view>
          <view class="account-input">
            <input type="digit" value="{{formData.avg_masturbation_duration}}" data-field="avg_masturbation_duration" bindinput="handleInput" placeholder="请输入时间" />
          </view>
        </view>
      </view>

      <view class="form-row">
        <view class="form-item">
          <view class="account-title">精液量(ml)</view>
          <view class="account-input">
            <input type="digit" value="{{formData.semen_volume}}" data-field="semen_volume" bindinput="handleInput" placeholder="请输入量" />
          </view>
        </view>
      </view>
    </view>

    <view class="btn-group">
      <view class="wx-login-btn" bindtap="submitForm">提交</view>
      <view class="prev-btn" bindtap="prevStep">上一步</view>
      <view class="otherlogin" bindtap="closeSupplementDrawer">取消</view>
    </view>
  </view>
</view>
